{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}
{% block content %}
<!-- Page Header -->
{% image self.banner_image max-1900x1265 as img %}

<header class="masthead" style="background-image: url('{{ img.url }}')">
    <div class="overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <div class="post-heading">
                    <h1>{{ self.display_title }}</h1>
                    {% if category %}
                    <h2> Filtered by: {{ category }} </h2>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</header>
 <!-- Main Content -->

<div class="container">
    <p> Donec dignissim mauris nec sapien auctor, id volutpat ligula aliquam. Vestibulum aliquam iaculis mattis. Curabitur imperdiet erat venenatis tellus cursus, at aliquet metus molestie. Maecenas gravida porttitor lorem, quis dapibus sem fermentum ut. Nullam varius purus eget quam auctor lobortis. Morbi scelerisque sem ut felis egestas faucibus. Proin iaculis, lectus at vestibulum tincidunt, elit dui iaculis nulla, vitae efficitur mauris arcu non metus. Vivamus mollis, sem id tristique ultrices, diam lacus tristique lectus, ac convallis ipsum diam quis massa.</p>
</div>

<div class="container">
    <!-- For the first loop counter I've reversed the order of the columns so that on mobile categories appears on top -->
    <div class="row flex-md-row-reverse">
        <div class="col-md-3 mx-auto">
            <h1>Categories</h1>
            {% for category in categories %}
                <a style="display: block;" href="/blog/?category={{ category.slug }}"> {{ category }}</a>
            {% endfor %}

        </div>
        <div class="col-md-9">
            {% for blogitem in posts %}
                <div class="row flex-md-row-reverse">
                    <div class="col-md-8">
                        <a href="{{ blogitem.url }}"><h3>{{ blogitem.title }}</h3></a>
                        <p>{{ blogitem.description }}</p>
                        <p class="post-meta">Posted by
                            <a href="#">{{ blogitem.author }}</a>
                            {{ blogitem.last_published_at.date }}
                        </p>
                    </div>
                    <div class="col-md-4 my-2 mx-auto text-center">
                        <a href="{{ blogitem.url }}">
                            {% image blogitem.banner_image fill-300x200-c100 as img3 %}
                            <img class="img-fluid rounded mb-3 mb-md-0" src="{{ img3.url }}" alt="{{ img3.alt }}">
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <hr>
</div>
     <!-- Add pagination -->
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            {% if posts.paginator.num_pages > 1 %}
                <ul class="pagination justify-content-center">
                    {% if posts.has_previous %}
                        <li class="page-item">
                            <a href="?page={{ posts.previous_page_number }}" class="page-link text-secondary">
                                Back
                            </a>
                        </li>
                    {% endif %}

                    {% for page_num in posts.paginator.page_range %}
                        <li class="page-item">
                            <a href="?page={{ page_num }}" class="page-link text-secondary {% if page_num == posts.number %} text-light bg-dark {% endif %}">
                                {{ page_num }}
                            </a>
                        </li>
                    {% endfor %}

                    {% if posts.has_next %}
                        <li class="page-item">
                            <a href="?page={{ posts.next_page_number }}" class="page-link text-secondary">
                                Next
                            </a>
                        </li>
                    {% endif %}
                </ul>
            {% endif %}
        </div>
    </div>
 </div>

{% endblock %}
